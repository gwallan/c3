<html>
  <head>
    <link href="../../css/c3.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <style>
      body{
        margin: 0;
        padding: 0;
        background-color: white;
      }
      #chart{
        height: 600px;
      }
      .c3-line {
        stroke-width: 2px;
      }
    </style>
    <div id="chart"></div>
    <script src="../../js/system.js"></script>
    <script>
      System.defaultJSExtensions = true;
      // set our baseURL reference path
      System.config({
          baseURL: '../../js/',
          meta: {
            'c3.js': {
              format: 'cjs'
            }
          }
      });
      Promise.all([
        System.import('c3-line'),
        System.import('c3-bar')
      ]).then(function(modules){
        var c3 = modules[1];

        window.chart = c3.generate({
            transition: {
              enabled: true,
              duration: 1500
            },
            "data":{
              "x":"x",
              "rows":[
                ['x', '8月京东评论-Top15机型', '单品价格'],
                ['魅蓝Note3','0.061','1050'],
                ['红米3S','0.053','829'],
                ['红米Note3','0.048','1012'],
                ['荣耀畅玩5X','0.043','1114'],
                ['乐2','0.043','1182'],
                ['苹果iPhone6s','0.035','5125'],
                ['荣耀8','0.033','2582'],
                ['360手机N4S','0.032','1379'],
                ['魅蓝3S','0.029','903'],
                ['OPPO R9','0.022','2511'],
                ['荣耀畅玩5C','0.021','1103'],
                ['荣耀7','0.02','1680'],
                ['荣耀畅玩5A','0.019','801'],
                ['魅蓝3','0.018','708'],
                ['小米5标准版','0.017','2056'],
              ],
              type: 'line',
              types: {
                  "单品价格": 'bar',
              },
              axes: {
                "8月京东评论-Top15机型": 'y2',
                "单品价格": 'y'
              },
            },
            "padding":{
              "left": 50,//左边距
              "right": 50,//右边距
              "top": 10,//上边距
              "bottom": 0//下边距
            },
            "axis":{
              "x":{
                "type":"category",
                // "label": "机型",//X轴标签文本
                "tick":{
                  "count":5,
                }
              },
              "y":{
                "label": "单品价格",//Y轴标签文本
                "min": 0,
                "tick":{
                  "count":5,
                  "format": function(v){
                    if (!v) return 0  // 0时返回0
                    if (parseInt(v) == v) return v  // 整形时,返回原值
                    if (parseFloat(v) == v) return parseFloat(v).toFixed(2)  // 数字时,取2位小数
                    return v;  // 非数字时,返回原值
                  }
                }
              },
              "y2": {
                show: true,
                "min": 0.01,
                "max": 0.08,
                "tick":{
                  "count":5,
                  "format": function(v){
                    if (!v) return 0  // 0时返回0
                    if (parseInt(v) == v) return v  // 整形时,返回原值
                    if (parseFloat(v) == v) return parseFloat(v).toFixed(2)  // 数字时,取2位小数
                    return v;  // 非数字时,返回原值
                  }
                }
              }
            },
            point: {
              show: true
            },
            "color":{"pattern":["#0691d2","#3655a7","#63308d","#9b046b","#e80c4c"]},
            "legend":{
              "show":true,
              "shape":"circle",
              "position": "inset",
              "inset": {
                "step": 1,
                "anchor": "top-right"
              }
            },
          });
      });
    </script>
  </body>
</html>
