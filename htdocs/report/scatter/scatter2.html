<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../../css/c3.css">
  </head>
  <body>
    <div id="chart"></div>

    <script src="../../js/system.js"></script>
    <script>
      System.defaultJSExtensions = true;
      // set our baseURL reference path
      System.config({
          baseURL: '/js/',
          meta: {
            'c3.js': {
              format: 'cjs'
            }
          },
          map: {
            "utility": "/js/src/utility.js"
          }
      });
      System.import('c3.js').then(function(c3){
        var chart = c3.generate({
          data: {
            xs: {
              "setosa_y": 'setosa_x',
              "versicolor_y": 'versicolor_x',
              "virginica_y": 'virginica_x'
            },
            columns: [
              ["setosa_x", 3.5],
              ["setosa_y", 8],
              ["setosa", 0.5],
              ["versicolor_x", 3.2, 3.2, 3.1, 2.3, 2.8],
              ["versicolor_y", 3, 3.5, 3, 2, 2],
              ["versicolor", 2.4, 1.5, 2.5, 1.3, 4.5],
              ["virginica_x", 3.3, 2.7, 3.0, 2.9, 3.0],
              ["virginica_y", 3, 3, 3.8, 2.1, 2.9],
              ["virginica", 2.5, 1.9, 2.1, 1.8, 6.2],
            ],
            type : 'scatter',
          },
          padding: {
            // right: 10
          },
          axis: {
            x: {
              label: '日期',
              "type":"category",
              tick: {
                // values: ["5.18","5.19","5.20","5.21","5.22"],
                "format": function(v){
                  if (!v) return 0  // 0时返回0
                  if (parseInt(v) == v) return v  // 整形时,返回原值
                  if (parseFloat(v) == v) return parseFloat(v).toFixed(2)  // 数字时,取2位小数
                  return v;  // 非数字时,返回原值
                }
              }
            },
            y: {
              min: 0,
              label: 'Petal.Width',
              tick: {
                count: 8,
                "format": function(v){
                  if (!v) return 0  // 0时返回0
                  if (parseInt(v) == v) return v  // 整形时,返回原值
                  if (parseFloat(v) == v) return parseFloat(v).toFixed(2)  // 数字时,取2位小数
                  return v;  // 非数字时,返回原值
                }
              }
            }
          },
          grid: {
            x: {
              show: true
            },
            y: {
              show: true
            }
          },
          legend: {
            "shape":"square",
            "position": "inset",
            "inset": {
              "step": 1,
              "anchor": "top-right"
            }
          },
          scatter: {
            key: ["setosa", "versicolor", "virginica"],
            symbol: {
              size: null
            }
          }
        });
      });
    </script>
  </body>
</html>
